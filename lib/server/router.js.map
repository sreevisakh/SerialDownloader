{"version":3,"sources":["router.js"],"names":["w","app","get","req","res","console","log","query","searchText","q","send","options","url","method","form","term","then","status","response","error","getSerialDetails"],"mappings":";;;;;;AAAA;;;;AACA;;IAAYA,C;;AACZ;;;;;;;;kBAEe,UAACC,GAAD,EAAS;;AAEpBA,QAAIC,GAAJ,CAAQ,aAAR,EAAuB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACjCC,gBAAQC,GAAR,CAAYH,IAAII,KAAhB;AACA,YAAIC,aAAaL,IAAII,KAAJ,CAAUE,CAA3B;AACA,YAAI,CAACD,UAAL,EAAiB;AACb,mBAAOJ,IAAIM,IAAJ,CAAS,EAAT,CAAP;AACH,SAFD,MAEO;AACH,gBAAIC,UAAU;AACVC,qBAAK,mDADK;AAEVC,wBAAQ,MAFE;AAGVC,sBAAM;AACFC,0BAAMP;AADJ;AAHI,aAAd;AAOA,0CAAQG,OAAR,EAAiBK,IAAjB,CAAsB,oBAAY;AAC9B,uBAAOZ,IAAIa,MAAJ,CAAW,GAAX,EAAgBP,IAAhB,CAAqBQ,QAArB,CAAP;AACH,aAFD,EAEG,iBAAS;AACRlB,kBAAEmB,KAAF,CAAQA,KAAR;AACA,uBAAOf,IAAIa,MAAJ,CAAW,GAAX,EAAgBP,IAAhB,CAAqBS,KAArB,CAAP;AACH,aALD;AAMH;AACJ,KApBD;AAqBAlB,QAAIC,GAAJ,CAAQ,iBAAR,EAA2B,gBAAYkB,gBAAvC;AACH,C","file":"router.js","sourcesContent":["import request from 'request-promise';\nimport * as w from 'winston';\nimport watchseries from './watchseries/index'\n\nexport default (app) => {\n\n    app.get('/api/search', (req, res) => {\n        console.log(req.query);\n        let searchText = req.query.q;\n        if (!searchText) {\n            return res.send([]);\n        } else {\n            let options = {\n                url: 'http://the-watch-series.to/show/search-shows-json',\n                method: 'POST',\n                form: {\n                    term: searchText\n                }\n            }\n            request(options).then(response => {\n                return res.status(200).send(response);\n            }, error => {\n                w.error(error);\n                return res.status(500).send(error);\n            })\n        }\n    });\n    app.get('/api/serial/:id', watchseries.getSerialDetails)\n}"],"sourceRoot":"/source/"}